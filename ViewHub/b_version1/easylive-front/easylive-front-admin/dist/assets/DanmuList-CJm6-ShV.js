import{f as I,r as c,c as C,a as r,Q as a,I as e,P as V,al as l,o as z,V as O,M as g,O as u,u as _}from"./@vue-BUfJ34TV.js";import{_ as $,a as H}from"./index-CMIbah-O.js";import{u as M}from"./vue-router-CJTPzalJ.js";import"./pinia-hNmMC5Va.js";import"./element-plus-DbefWuNz.js";import"./lodash-es-S0Y0Up6J.js";import"./@vueuse-2FrdvzKS.js";import"./@element-plus-D0JjnY5J.js";import"./@popperjs-D_chPuIy.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-BdefatKI.js";import"./artplayer-BnYtXt6g.js";import"./async-validator-9PlIezaS.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./@floating-ui-85_40PfK.js";import"./vue-cookies-B4eaU0RH.js";import"./vue-cropper-Cy4TyJt1.js";import"./mitt-DJ65BbbF.js";import"./hls.js-Cmhi5IOP.js";import"./artplayer-plugin-danmuku-BE7OmyYk.js";import"./axios-NIGUFBhG.js";import"./moment-C5S46NFB.js";const R={class:"top-panel"},T=["href"],F=["onClick"],j=["href"],B={__name:"DanmuList",setup(L){const{proxy:s}=I();M();const h=[{label:"发送者",prop:"nickName",width:150,scopedSlots:"slotNickName"},{label:"播放时间",prop:"time",scopedSlots:"time",width:100},{label:"弹幕内容",prop:"text",scopedSlots:"slotText"},{label:"发送时间",prop:"postTime",width:180},{label:"操作",prop:"operation",width:80,scopedSlots:"slotOperation"}],x=c(),f=c({extHeight:0}),p=c({}),m=c({}),d=async()=>{let n={pageNo:m.value.pageNo,pageSize:m.value.pageSize};Object.assign(n,p.value);let t=await s.Request({url:s.Api.loadDanmu,params:n});t&&Object.assign(m.value,t.data)},k=n=>{s.Confirm({message:"确定要删除吗？",okfun:async()=>{await s.Request({url:s.Api.delDanmu,params:{danmuId:n}})&&(s.Message.success("删除成功"),d())}})};return(n,t)=>{const N=l("el-input"),S=l("el-form-item"),v=l("el-col"),D=l("el-button"),w=l("el-row"),y=l("el-form"),b=l("el-card");return z(),C(V,null,[r("div",R,[a(b,null,{default:e(()=>[a(y,{model:p.value,onSubmit:t[1]||(t[1]=O(()=>{},["prevent"]))},{default:e(()=>[a(w,{gutter:10},{default:e(()=>[a(v,{span:5},{default:e(()=>[a(S,{label:"视频"},{default:e(()=>[a(N,{clearable:"",placeholder:"输入视频名称搜索",modelValue:p.value.videoNameFuzzy,"onUpdate:modelValue":t[0]||(t[0]=i=>p.value.videoNameFuzzy=i)},null,8,["modelValue"])]),_:1})]),_:1}),a(v,{span:5},{default:e(()=>[a(D,{type:"primary",onClick:d},{default:e(()=>t[2]||(t[2]=[g("搜索",-1)])),_:1,__:[2]})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),a(b,{class:"table-data-card"},{default:e(()=>[a(H,{ref_key:"tableInfoRef",ref:x,columns:h,fetch:d,dataSource:m.value,options:f.value,extHeight:f.value.extHeight},{slotNickName:e(({index:i,row:o})=>[r("a",{target:"_blank",class:"nick-name",href:`${_(s).webDomain}/user/${o.userId}`},u(o.nickName),9,T)]),time:e(({index:i,row:o})=>[g(u(_(s).Utils.convertSecondsToHMS(Math.round(o.time))),1)]),slotOperation:e(({index:i,row:o})=>[r("a",{href:"javascript:void(0)",class:"a-link",onClick:q=>k(o.danmuId)},"删除",8,F)]),slotText:e(({index:i,row:o})=>[r("div",null,u(o.text),1),r("a",{target:"_blank",class:"video-info",href:`${_(s).webDomain}/video/${o.videoId}`},"视频："+u(o.videoName),9,j)]),_:1},8,["dataSource","options","extHeight"])]),_:1})],64)}}},ce=$(B,[["__scopeId","data-v-ca4d3c98"]]);export{ce as default};
