import{f as T,r as m,c as h,a as p,Q as o,I as t,P as j,al as l,o as x,V as L,M as S,O as n,K as R,u as U}from"./@vue-BUfJ34TV.js";import{_ as $,a as D}from"./index-CMIbah-O.js";import{u as F}from"./vue-router-CJTPzalJ.js";import"./pinia-hNmMC5Va.js";import"./element-plus-DbefWuNz.js";import"./lodash-es-S0Y0Up6J.js";import"./@vueuse-2FrdvzKS.js";import"./@element-plus-D0JjnY5J.js";import"./@popperjs-D_chPuIy.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-BdefatKI.js";import"./artplayer-BnYtXt6g.js";import"./async-validator-9PlIezaS.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./@floating-ui-85_40PfK.js";import"./vue-cookies-B4eaU0RH.js";import"./vue-cropper-Cy4TyJt1.js";import"./mitt-DJ65BbbF.js";import"./hls.js-Cmhi5IOP.js";import"./artplayer-plugin-danmuku-BE7OmyYk.js";import"./axios-NIGUFBhG.js";import"./moment-C5S46NFB.js";const H={class:"top-panel"},M=["href"],B={key:0},P=["onClick"],q={__name:"UserList",setup(E){const{proxy:i}=T();F();const k={0:"女",1:"男",2:"保密"},C=[{label:"头像",prop:"avatar",width:100,scopedSlots:"slotAvatar"},{label:"昵称",prop:"nickName",width:150,scopedSlots:"slotNickName"},{label:"邮箱",prop:"email",width:150},{label:"出生日期",prop:"birthday",width:150},{label:"加入时间",prop:"joinTime",scopedSlots:"slotJoinTime",width:300},{label:"最后登录IP",prop:"lastLoginIp",width:150},{label:"简介",prop:"personIntroduction"},{label:"硬币数量",prop:"coin",scopedSlots:"slotCoin"},{label:"状态",prop:"status",scopedSlots:"slotStatus"},{label:"操作",prop:"operation",width:80,scopedSlots:"slotOperation"}],N=m(),f=m({extHeight:0}),u=m({}),c=m({}),d=async()=>{let r={pageNo:c.value.pageNo,pageSize:c.value.pageSize};Object.assign(r,u.value);let a=await i.Request({url:i.Api.loadUser,params:r});a&&Object.assign(c.value,a.data)},y=r=>{i.Confirm({message:`确定要${r.status==0?"启用":"禁用"}吗？`,okfun:async()=>{await i.Request({url:i.Api.changeStatus,params:{userId:r.userId,status:r.status==0?1:0}})&&(i.Message.success("操作成功"),d())}})};return(r,a)=>{const I=l("el-input"),v=l("el-form-item"),_=l("el-col"),b=l("el-option"),V=l("el-select"),A=l("el-button"),w=l("el-row"),z=l("el-form"),g=l("el-card"),O=l("Avatar");return x(),h(j,null,[p("div",H,[o(g,null,{default:t(()=>[o(z,{model:u.value,onSubmit:a[2]||(a[2]=L(()=>{},["prevent"]))},{default:t(()=>[o(w,{gutter:10},{default:t(()=>[o(_,{span:5},{default:t(()=>[o(v,{label:"用户昵称"},{default:t(()=>[o(I,{clearable:"",placeholder:"输入用户昵称",modelValue:u.value.nickNameFuzzy,"onUpdate:modelValue":a[0]||(a[0]=s=>u.value.nickNameFuzzy=s)},null,8,["modelValue"])]),_:1})]),_:1}),o(_,{span:5},{default:t(()=>[o(v,{label:"状态",prop:""},{default:t(()=>[o(V,{clearable:"",placeholder:"请选择状态",modelValue:u.value.status,"onUpdate:modelValue":a[1]||(a[1]=s=>u.value.status=s)},{default:t(()=>[o(b,{value:0,label:"禁用"}),o(b,{value:1,label:"启用"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),o(_,{span:5},{default:t(()=>[o(A,{type:"primary",onClick:d},{default:t(()=>a[3]||(a[3]=[S("搜索",-1)])),_:1,__:[3]})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),o(g,{class:"table-data-card"},{default:t(()=>[o(D,{ref_key:"tableInfoRef",ref:N,columns:C,fetch:d,dataSource:c.value,options:f.value,extHeight:f.value.extHeight},{slotAvatar:t(({index:s,row:e})=>[o(O,{avatar:e.avatar},null,8,["avatar"])]),slotNickName:t(({index:s,row:e})=>[p("a",{class:"nick-name",href:`${U(i).webDomain}/user/${e.userId}`},n(e.nickName),9,M),e.sex?(x(),h("span",B,"("+n(k[e.sex])+")",1)):R("",!0)]),slotJoinTime:t(({index:s,row:e})=>[p("div",null,"加入时间："+n(e.joinTime),1),p("div",null,"最后登录时间："+n(e.lastLoginTime),1)]),slotCoin:t(({index:s,row:e})=>[p("div",null,"当前:"+n(e.currentCoinCount),1),p("div",null,"总数:"+n(e.totalCoinCount),1)]),slotStatus:t(({index:s,row:e})=>[S(n(e.status==0?"禁用":"启用"),1)]),slotOperation:t(({index:s,row:e})=>[p("a",{href:"javascript:void(0)",class:"a-link",onClick:J=>y(e)},n(e.status==0?"启用":"禁用"),9,P)]),_:1},8,["dataSource","options","extHeight"])]),_:1})],64)}}},ve=$(q,[["__scopeId","data-v-39c7d2a6"]]);export{ve as default};
