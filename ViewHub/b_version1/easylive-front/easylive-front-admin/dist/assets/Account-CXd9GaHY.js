import{f as w,r as m,c as V,Q as s,I as a,al as c,o as y,a as n,a4 as h,M as x}from"./@vue-BUfJ34TV.js";import{u as b,b as R}from"./vue-router-CJTPzalJ.js";import{m as q}from"./js-md5-Bbdx8amY.js";import"./artplayer-BnYtXt6g.js";const z={class:"account-panel"},K={class:"check-code-panel"},A=["src"],M={__name:"Account",setup(B){const{proxy:t}=w(),k=b();R();const d=m({}),p=async()=>{let u=await t.Request({url:t.Api.checkCode});u&&(d.value=u.data)};p();const o=m({}),f=m(),v={account:[{required:!0,message:"请输入账号"}],password:[{required:!0,message:"请输入密码"}],checkCode:[{required:!0,message:"请输入图片验证码"}]},_=()=>{f.value.validate(async u=>{if(!u)return;let e={};Object.assign(e,o.value),e.checkCodeKey=d.value.checkCodeKey,e.password=q(e.password);let l=await t.Request({url:t.Api.login,params:e,errorCallback:()=>{p()}});l&&(k.push("/home"),t.Message.success("登录成功"),t.VueCookies.set("account",l.data))})};return(u,e)=>{const l=c("el-input"),i=c("el-form-item"),C=c("el-button"),g=c("el-form");return y(),V("div",z,[s(g,{class:"login-panel",model:o.value,rules:v,ref_key:"formDataRef",ref:f},{default:a(()=>[e[8]||(e[8]=n("div",{class:"login-title"},"登录",-1)),s(i,{prop:"email"},{default:a(()=>[s(l,{size:"large",clearable:"",placeholder:"请输入账号",modelValue:o.value.account,"onUpdate:modelValue":e[0]||(e[0]=r=>o.value.account=r),maxLength:"150"},{prefix:a(()=>e[4]||(e[4]=[n("span",{class:"iconfont icon-account"},null,-1)])),_:1},8,["modelValue"])]),_:1}),s(i,{prop:"password"},{default:a(()=>[s(l,{"show-password":"",size:"large",placeholder:"请输入密码",modelValue:o.value.password,"onUpdate:modelValue":e[1]||(e[1]=r=>o.value.password=r)},{prefix:a(()=>e[5]||(e[5]=[n("span",{class:"iconfont icon-password"},null,-1)])),_:1},8,["modelValue"])]),_:1}),s(i,{prop:"checkCode"},{default:a(()=>[n("div",K,[s(l,{size:"large",placeholder:"请输入验证码",modelValue:o.value.checkCode,"onUpdate:modelValue":e[2]||(e[2]=r=>o.value.checkCode=r),onKeyup:h(_,["enter"])},{prefix:a(()=>e[6]||(e[6]=[n("span",{class:"iconfont icon-checkcode"},null,-1)])),_:1},8,["modelValue"]),n("img",{src:d.value.checkCode,class:"check-code",onClick:e[3]||(e[3]=r=>p())},null,8,A)])]),_:1}),s(C,{type:"primary",size:"large",class:"op-btn",onClick:_},{default:a(()=>e[7]||(e[7]=[x(" 登录 ",-1)])),_:1,__:[7]})]),_:1,__:[8]},8,["model"])])}}};export{M as default};
