import{f as A,r as d,c as k,a as o,Q as a,I as n,P as g,al as l,o as C,V as F,M as f,u as _,O as r,K as H}from"./@vue-BUfJ34TV.js";import{_ as O,a as B}from"./index-CMIbah-O.js";import{u as L}from"./vue-router-CJTPzalJ.js";import"./pinia-hNmMC5Va.js";import"./element-plus-DbefWuNz.js";import"./lodash-es-S0Y0Up6J.js";import"./@vueuse-2FrdvzKS.js";import"./@element-plus-D0JjnY5J.js";import"./@popperjs-D_chPuIy.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-BdefatKI.js";import"./artplayer-BnYtXt6g.js";import"./async-validator-9PlIezaS.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./@floating-ui-85_40PfK.js";import"./vue-cookies-B4eaU0RH.js";import"./vue-cropper-Cy4TyJt1.js";import"./mitt-DJ65BbbF.js";import"./hls.js-Cmhi5IOP.js";import"./artplayer-plugin-danmuku-BE7OmyYk.js";import"./axios-NIGUFBhG.js";import"./moment-C5S46NFB.js";const M={class:"top-panel"},U={class:"comment-info"},j=["href"],q={class:"comment"},T=["href"],E=["href"],K={class:"content"},P={class:"time-info"},Q={class:"time"},w=["onClick"],G=["href"],J={class:"video-name"},W={__name:"CommentList",setup(X){const{proxy:s}=A();L();const x=[{label:"评论信息",scopedSlots:"slotComment"},{label:"视频信息",scopedSlots:"slotVideo",width:150}],y=d(),v=d({extHeight:0}),m=d({}),c=d({}),p=async()=>{let i={pageNo:c.value.pageNo,pageSize:c.value.pageSize};Object.assign(i,m.value);let e=await s.Request({url:s.Api.loadComment,params:i});e&&Object.assign(c.value,e.data)},N=i=>{s.Confirm({message:"确定要删除吗？",okfun:async()=>{await s.Request({url:s.Api.delComment,params:{commentId:i}})&&(s.Message.success("删除成功"),p())}})};return(i,e)=>{const I=l("el-input"),V=l("el-form-item"),b=l("el-col"),$=l("el-button"),S=l("el-row"),D=l("el-form"),h=l("el-card"),z=l("Avatar"),R=l("Cover");return C(),k(g,null,[o("div",M,[a(h,null,{default:n(()=>[a(D,{model:m.value,onSubmit:e[1]||(e[1]=F(()=>{},["prevent"]))},{default:n(()=>[a(S,{gutter:10},{default:n(()=>[a(b,{span:5},{default:n(()=>[a(V,{label:"视频"},{default:n(()=>[a(I,{clearable:"",placeholder:"输入视频名称搜索",modelValue:m.value.videoNameFuzzy,"onUpdate:modelValue":e[0]||(e[0]=u=>m.value.videoNameFuzzy=u)},null,8,["modelValue"])]),_:1})]),_:1}),a(b,{span:5},{default:n(()=>[a($,{type:"success",onClick:p},{default:n(()=>e[2]||(e[2]=[f("搜索",-1)])),_:1,__:[2]})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),a(h,{class:"table-data-card"},{default:n(()=>[a(B,{ref_key:"tableInfoRef",ref:y,columns:x,fetch:p,dataSource:c.value,options:v.value,extHeight:v.value.extHeight},{slotComment:n(({index:u,row:t})=>[o("div",U,[o("a",{class:"a-link nick-name",href:`${_(s).webDomain}/user/${t.userId}`,target:"_blank"},[a(z,{avatar:t.avatar},null,8,["avatar"])],8,j),o("div",q,[o("div",null,[o("a",{class:"a-link nick-name",href:`${_(s).webDomain}/user/${t.userId}`,target:"_blank"},r(t.nickName),9,T),t.replyUserId?(C(),k(g,{key:0},[e[3]||(e[3]=f(" 回复@ ",-1)),o("a",{class:"a-link nick-name",href:`${_(s).webDomain}/user/${t.replyUserId}`,target:"_blank"},r(t.replyNickName),9,E),e[4]||(e[4]=f("的评论 ",-1))],64)):H("",!0)]),o("div",K,r(t.content),1),o("div",P,[o("div",Q,r(t.postTime),1),o("div",{class:"iconfont icon-delete",onClick:Y=>N(t.commentId)},null,8,w)])])])]),slotVideo:n(({index:u,row:t})=>[o("a",{href:`${_(s).webDomain}/video/${t.videoId}`,target:"_blank",class:"a-link"},[a(R,{source:t.videoCover},null,8,["source"]),o("div",J,r(t.videoName),1)],8,G)]),_:1},8,["dataSource","options","extHeight"])]),_:1})],64)}}},xe=O(W,[["__scopeId","data-v-4e440fb6"]]);export{xe as default};
