import{u as T,a as x}from"./vue-router-ffDWPyKt.js";import{i as k}from"./echarts-Bjls8lsK.js";import{_ as g}from"./index-V73uJnXy.js";import{f as w,r as u,s as A,al as I,c,o as p,Q as f,I as v,a as e,P as _,a6 as b,D as h,O as d,n as K}from"./@vue-_Q8M3GyZ.js";import"./zrender-CqOA7ozP.js";import"./pinia-CtRA5Bu2.js";import"./element-plus-Bescc1QT.js";import"./lodash-es-S0Y0Up6J.js";import"./@vueuse-DfuMZOfy.js";import"./@element-plus-B8yk6LGT.js";import"./@popperjs-D_chPuIy.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-BdefatKI.js";import"./artplayer-BnYtXt6g.js";import"./async-validator-9PlIezaS.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./@floating-ui-85_40PfK.js";import"./axios-NIGUFBhG.js";import"./vue-cookies-B4eaU0RH.js";import"./@fingerprintjs-BciRmnos.js";import"./tslib-BLN2B0TR.js";import"./vue-cropper-BrUi_TYK.js";import"./mitt-DJ65BbbF.js";import"./moment-C5S46NFB.js";const R={class:"video-data-list"},S=["onClick"],$={class:"video-data-title"},B={class:"pre-count"},E={class:"total-count"},H={__name:"Home",setup(L){const{proxy:s}=w();T(),x();const l=u([{name:"粉丝",icon:"icon-fans",totalCountKey:"userCount",preDataType:1,totalCount:0,preCount:0},{name:"播放",icon:"icon-play-solid",totalCountKey:"playCount",preDataType:0,totalCount:0,preCount:0},{name:"评论",icon:"icon-comment-solid",totalCountKey:"commentCount",preDataType:5,totalCount:0,preCount:0},{name:"弹幕",icon:"icon-danmu-solid",totalCountKey:"danmuCount",preDataType:6,totalCount:0,preCount:0},{name:"点赞",icon:"icon-like-solid",totalCountKey:"likeCount",preDataType:2,totalCount:0,preCount:0},{name:"收藏",icon:"icon-collection-solid",totalCountKey:"collectCount",preDataType:3,totalCount:0,preCount:0},{name:"投币",icon:"icon-toubi",totalCountKey:"coinCount",preDataType:4,totalCount:0,preCount:0}]);(async()=>{let a=await s.Request({url:s.Api.ucGetActualTimeStatisticsInfo});if(!a)return;const n=a.data.totalCountInfo,o=a.data.preDayData;l.value.forEach(t=>{t.totalCount=n[t.totalCountKey],t.preCount=o[t.preDataType]?o[t.preDataType]:0})})();const m=u(null),C=A();(()=>{K(()=>{C.value=k(m.value),y()})})();const D=a=>{r.value=a,y()},r=u(l.value[0]),y=async()=>{let a=await s.Request({url:s.Api.getWeekStatisticsInfo,params:{dataType:r.value.preDataType}});if(!a)return;const n=[],o=[];a.data.forEach(i=>{n.push(i.statisticsDate),o.push(i.statisticsCount)});const t={title:{text:`近7天${r.value.name}量`},tooltip:{trigger:"axis"},legend:{data:[r.value.name]},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0,xAxis:[{type:"category",boundaryGap:!1,data:n}],yAxis:[{type:"value",axisLabel:{formatter:"{value} °C"}}],series:[{name:r.value.name,type:"line",data:o,smooth:!0,itemStyle:{normal:{color:"#ff6699",lineStyle:{color:"#ff6699"}}}}]};C.value.setOption(t,!0)};return(a,n)=>{const o=I("el-card");return p(),c(_,null,[f(o,{class:"box-card"},{default:v(()=>[n[0]||(n[0]=e("div",{slot:"header"},[e("div",{class:"part-title"},"视频数据")],-1)),e("div",R,[(p(!0),c(_,null,b(l.value,t=>(p(),c("div",{class:h(["video-data-item",t.preDataType==r.value.preDataType?"active":""]),onClick:i=>D(t)},[e("div",$,[e("div",{class:h(["name iconfont",t.icon])},d(t.name),3),e("div",B,d(t.preCount),1)]),e("div",E,d(t.totalCount),1)],10,S))),256))])]),_:1,__:[0]}),f(o,{class:"week-data-panel"},{default:v(()=>[e("div",{ref_key:"chartRef",ref:m,class:"data-chart"},null,512)]),_:1})],64)}}},ct=g(H,[["__scopeId","data-v-80b429bc"]]);export{ct as default};
