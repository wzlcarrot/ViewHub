import{_ as M,m as y}from"./index-V73uJnXy.js";import{_ as P}from"./VideoList-Q6gFZqUl.js";import{u as z}from"./navActionStore-DKNJs-en.js";import{a as B}from"./vue-router-ffDWPyKt.js";import{f as E,r,h as H,S as W,al as v,c as l,o as s,a as t,Q as _,C as D,K as U,I as f,P as h,a6 as C,H as V,u as q,M as K,O,D as Q}from"./@vue-_Q8M3GyZ.js";import"./pinia-CtRA5Bu2.js";import"./element-plus-Bescc1QT.js";import"./lodash-es-S0Y0Up6J.js";import"./@vueuse-DfuMZOfy.js";import"./@element-plus-B8yk6LGT.js";import"./@popperjs-D_chPuIy.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-BdefatKI.js";import"./artplayer-BnYtXt6g.js";import"./async-validator-9PlIezaS.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./@floating-ui-85_40PfK.js";import"./axios-NIGUFBhG.js";import"./vue-cookies-B4eaU0RH.js";import"./@fingerprintjs-BciRmnos.js";import"./tslib-BLN2B0TR.js";import"./vue-cropper-BrUi_TYK.js";import"./mitt-DJ65BbbF.js";import"./moment-C5S46NFB.js";const T={class:"roll-image"},j=["src","alt"],G={key:0,class:"carousel-bottom"},J={class:"name-op"},X={class:"dtos"},Y=["onClick"],Z={class:"video-list"},ee={__name:"Index",setup(oe){const i=z(),{proxy:n}=E();B();const w=r(),u=r(),x=()=>{const e=Math.max((document.documentElement.clientWidth-n.bodyPadding*2-8)*.4218,400);u.value=e};H(()=>{y.on("windowResize",()=>{x()}),x(),i.setShowHeader(!0),i.setFixedHeader(!0),i.setFixedCategory(!0),i.setShowCategory(!0),i.setForceFixedHeader(!1)}),W(()=>{y.off("windowResize")});const m=n.carouselMaxCount,a=r([]),k=r([]);(async()=>{const e=await n.Request({url:n.Api.loadRecommendVideo});if(!e)return;const d=e.data;d.length>m?(a.value=d.slice(0,m),k.value=d.slice(m,m+6)):a.value=d})();const c=r(0),R=e=>{c.value=e},p=r(),N=()=>{p.value.prev()},S=()=>{p.value.next()},$=e=>{p.value.setActiveItem(e-1+"")},b=e=>{e.target.src=n.Utils.getLocalImage("default_image.png"),e.target.onerror=null};return(e,d)=>{const I=v("router-link"),A=v("el-carousel-item"),F=v("el-carousel"),L=v("VideoItem");return s(),l(h,null,[t("div",{class:"commend-panel",ref_key:"commendPanelRef",ref:w},[t("div",{class:"carousel-panel",style:D({width:u.value+"px",height:u.value*.6+"px"})},[_(F,{height:u.value*.6+"px","indicator-position":"none",arrow:"never",ref_key:"elCarouselRef",ref:p,onChange:R},{default:f(()=>[(s(!0),l(h,null,C(a.value,(o,g)=>(s(),V(A,{key:o.videoId||g,name:g+""},{default:f(()=>[t("div",T,[_(I,{to:`/video/${a.value[c.value].videoId}`,target:"_blank"},{default:f(()=>[t("img",{src:`${q(n).Api.sourcePath}${o.videoCover}`,onError:b,alt:o.videoName||"视频封面"},null,40,j)]),_:2},1032,["to"])])]),_:2},1032,["name"]))),128))]),_:1},8,["height"]),a.value.length>0?(s(),l("div",G,[t("div",J,[_(I,{class:"video-name",to:`/video/${a.value[c.value].videoId}`,target:"_blank"},{default:f(()=>[K(O(a.value[c.value].videoName),1)]),_:1},8,["to"]),t("div",{class:"change-btn"},[t("span",{class:"iconfont icon-right",onClick:N}),t("span",{class:"iconfont icon-left",onClick:S})])]),t("div",X,[(s(!0),l(h,null,C(a.value.length,o=>(s(),l("div",{class:Q(["dto-item",c.value===o-1?"active":""]),key:o,onClick:g=>$(o)},null,10,Y))),128))])])):U("",!0)],4),t("div",Z,[(s(!0),l(h,null,C(k.value,o=>(s(),V(L,{key:o.videoId,data:o},null,8,["data"]))),128))])],512),_(P)],64)}}},Se=M(ee,[["__scopeId","data-v-e7d00149"]]);export{Se as default};
